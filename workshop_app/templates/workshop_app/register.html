{% extends 'workshop_app/base.html' %}

	{% block title %}
		Register
	{% endblock %}

{% block content %}

	<style type="text/css">
    	label.required::after {
    	content: "*";
    	color: red;
		}

		.errorlist {
      color: red;
    }
	</style>

	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-10 col-lg-8">
				<div class="card glass">
					<div class="card-body p-4">
						<h3 class="mb-3">Coordinator Registration</h3>
						<p class="text-muted">I'll ask one thing at a time. Easier, faster.</p>
						<form action="" method="post" id="reg-form">
							{% csrf_token %}
							<div class="form-row">
								<div class="col-12">
									{{ form.non_field_errors }}
								</div>
							</div>
							<div id="stepper" class="mb-3"></div>
							<div id="reg-fields" class="form-group">{{ form.as_p }}</div>
							<div class="d-flex justify-content-between mt-3">
								<button type="button" id="prevBtn" class="btn btn-outline-info" style="display:none">Back</button>
								<button type="button" id="nextBtn" class="btn btn-primary">Next</button>
								<button type="submit" id="submitBtn" class="btn btn-success" style="display:none">Register</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script>
	(function() {
	  const container = document.getElementById('reg-fields');
	  if (!container) return;
	  const fields = Array.from(container.querySelectorAll('p'));
	  let idx = 0;
	  const nextBtn = document.getElementById('nextBtn');
	  const prevBtn = document.getElementById('prevBtn');
	  const submitBtn = document.getElementById('submitBtn');
	  const stepper = document.getElementById('stepper');

	  fields.forEach(p => { p.classList.add('mb-3'); });

	  function renderStepper() {
	    const total = fields.length;
	    stepper.innerHTML = `<small class="text-muted">Step ${idx+1} of ${total}</small>`;
	  }

	  function showCurrent() {
	    fields.forEach((p, i) => p.style.display = i === idx ? 'block' : 'none');
	    prevBtn.style.display = idx > 0 ? 'inline-block' : 'none';
	    nextBtn.style.display = idx < fields.length - 1 ? 'inline-block' : 'none';
	    submitBtn.style.display = idx === fields.length - 1 ? 'inline-block' : 'none';
	    renderStepper();
	  }

	  nextBtn.addEventListener('click', () => {
	    if (idx < fields.length - 1) idx += 1;
	    showCurrent();
	  });
	  prevBtn.addEventListener('click', () => {
	    if (idx > 0) idx -= 1;
	    showCurrent();
	  });

	  showCurrent();
	})();
	</script>
{% endblock %}
